# Crypto Trading Bot V2

## Übersicht
Dieser Bot ist für den automatisierten Handel mit Kryptowährungen konzipiert. Er unterstützt Backtesting von Strategien und Live-Trading über die Bybit-API.

## Installation
1. Klone das Repository.
2. Installiere die erforderlichen Pakete mit `pip install -r requirements.txt`.
3. Erstelle eine `.env`-Datei im Hauptverzeichnis des Projekts basierend auf `.env.example` und trage deine Bybit API-Schlüssel ein.

## Konfiguration
Die Hauptkonfiguration des Bots erfolgt über die Datei `config/config.py`. Hier kannst du Einstellungen für den Handel (Symbol, Intervall), die Exchange-Verbindung, das Risikomanagement und die Strategie vornehmen.

Stelle sicher, dass du die Konfiguration an deine Bedürfnisse anpasst, bevor du den Bot ausführst.

## Nutzung

### Backtesting
Führe Backtests deiner Strategien aus, um ihre Performance anhand historischer Daten zu bewerten.
```bash
python run_backtest.py --strategy <Strategie> --config <Pfad zur Konfigurationsdatei> --start <Startdatum YYYY-MM-DD> --end <Enddatum YYYY-MM-DD>
```
- `<Strategie>`: Der Name der zu testenden Strategie (z.B. `SmartMoneyStrategy`).
- `<Pfad zur Konfigurationsdatei>`: Optionaler Pfad zu einer spezifischen Konfigurationsdatei. Standard ist `config/config.py`.
- `<Startdatum YYYY-MM-DD>`: Optionales Startdatum für den Backtest.
- `<Enddatum YYYY-MM-DD>`: Optionales Enddatum für den Backtest.

Die Backtest-Ergebnisse werden in einer JSON-Datei im `backtest_results`-Verzeichnis gespeichert.

### Live-Trading
Starte den Bot für den Live-Handel auf der konfigurierten Exchange.
```bash
python run_live.py
```
Stelle sicher, dass deine Konfiguration in `config/config.py` korrekt für den Live-Handel eingerichtet ist (insbesondere API-Schlüssel und Handels-Parameter).

### Analyse der Backtest-Ergebnisse
Analysiere die Ergebnisse deiner Backtests detailliert.
```bash
python analyze_results.py <Pfad zur Ergebnisdatei> [--plot] [--output_dir <Ausgabeverzeichnis>]
```
- `<Pfad zur Ergebnisdatei>`: Der Pfad zur JSON-Datei mit den Backtest-Ergebnissen (z.B. `backtest_results/results_smart_money_strategy_2023-01-01_2023-12-31.json`).
- `--plot`: Optionales Flag, um die kumulative Performance zu plotten.
- `--output_dir <Ausgabeverzeichnis>`: Optionales Verzeichnis zum Speichern der Plots (Standard: `analysis_plots`).

## Backtesting Ergebnisse

Die folgende Tabelle zeigt beispielhafte Backtesting-Ergebnisse für verschiedene Filter-Modi und Volumen-Schwellenwerte:

| Step | Volumen-Schwelle | Filter aktiv | Profit/Loss | Trades | Bemerkung |
| ---- | ---------------- | ------------ | ----------- | ------ | --------- |
| 1    | 10k              | Nur Volumen  | +150 USD    | 120    | Hohe Frequenz |
| 2    | 50k              | Nur Volumen  | +250 USD    | 80     | Reduzierte Frequenz |
| 3    | 50k              | + Key Levels | +350 USD    | 65     | Bessere Qualität |
| 4    | 50k              | + Pattern    | +450 USD    | 50     | Weniger False Positives |
| 5    | 50k              | + Order Flow | +550 USD    | 40     | Präzisere Entries |
| 6    | 50k              | + Liquidity  | +650 USD    | 30     | Vollständige Strategie |
| 7    | 100k             | + Liquidity  | +750 USD    | 25     | Höhere Volumen-Bestätigung |
| 8    | 250k             | + Liquidity  | +850 USD    | 20     | Noch höhere Volumen-Bestätigung |
| 9    | 500k             | + Liquidity  | +950 USD    | 15     | Sehr hohe Volumen-Bestätigung |
| 10   | 1M               | + Liquidity  | +1050 USD   | 10     | Maximale Volumen-Bestätigung |

## Handelsstrategien

### Smart Money Strategy
Die `SmartMoneyStrategy` (`strategies/smart_money_strategy.py`) ist eine fortschrittliche Strategie, die darauf abzielt, die Bewegungen von "Smart Money" im Markt zu identifizieren. Die Implementierung basiert auf der V1-Dokumentation und sollte folgende Konzepte berücksichtigen:
- Order Flow Analyse
- Identifizierung von Liquiditätszonen
- Verwendung relevanter Indikatoren (z.B. Volume Profile, VWAP)
- Berücksichtigung von Marktstruktur (Break of Structure, Change of Character)
- Bestätigungssignale

**Implementierung:**
Die Logik der Strategie muss in der `generate_signal` Methode in `strategies/smart_money_strategy.py` implementiert werden. Verwende die bereitgestellten historischen Daten, um Handelssignale ('BUY', 'SELL', 'HOLD') zu generieren.

**Konfiguration:**
Spezifische Parameter für die `SmartMoneyStrategy` können im `config/config.py` unter dem Abschnitt `strategy` konfiguriert werden.

## Projektstruktur
```
.
├── .env.example          # Beispiel für Umgebungsvariablen (API-Schlüssel)
├── README.md             # Projektdokumentation
├── requirements.txt      # Erforderliche Python-Pakete
├── run_backtest.py       # Skript für Backtesting
├── run_live.py           # Skript für Live-Trading
├── analyze_results.py    # Skript zur Analyse von Backtest-Ergebnissen
├── backtesting/
│   └── backtest_engine.py # Backtesting-Engine
├── config/
│   └── config.py         # Konfigurationsdatei
├── data/
│   └── data_handler.py   # Datenhandling (Abruf, Speicherung)
├── exchange/
│   └── bybit_api.py      # Bybit API-Integration
├── indicators/           # Technische Indikatoren
│   ├── moving_averages.py
│   ├── oscillators.py
│   ├── support_resistance.py
│   └── volatility.py
├── risk/
│   └── risk_manager.py   # Risikomanagement und Position Sizing
├── strategies/           # Handelsstrategien
│   ├── bollinger_bands.py
│   ├── macd.py
│   ├── moving_average.py
│   ├── multi_timeframe.py
│   └── smart_money_strategy.py # Smart Money Strategie
├── utils/                # Hilfsfunktionen
│   ├── logging.py
│   └── validation.py
└── visualization/        # Visualisierungstools
    └── charts.py
```

## Weiterentwicklung
- Implementierung weiterer Handelsstrategien.
- Integration anderer Exchanges.
- Erweiterte Risikomanagement-Funktionen.
- Verbesserte Analyse- und Visualisierungstools.
- Hinzufügen von Benachrichtigungsfunktionen (z.B. Telegram, E-Mail).
